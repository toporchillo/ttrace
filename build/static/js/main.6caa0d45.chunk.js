(this["webpackJsonptt-race"]=this["webpackJsonptt-race"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.78e57cd0.svg"},function(e,t,a){e.exports=a(16)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(7),s=a.n(r),l=(a(14),a(15),function(e){return i.a.createElement("div",null,i.a.createElement("main",null,e.children))}),o=a(2),c=a(3),u=a(1),h=a(5),m=a(4),f={border:"solid 0.2em gray",width:"5em",height:"4.8em",padding:"0.4em",display:"flex",flexDirection:"column",float:"left",margin:"0.4em 0 0 0.4em"},d={backgroundColor:"yellow",cursor:"pointer",padding:"0.1em"},v={backgroundColor:"#70ff70",cursor:"pointer",padding:"0.1em"},p={backgroundColor:"#ff7070",padding:"0.1em"},b={backgroundColor:"#a0a0a0",padding:"0.1em"},E={padding:"0.2em auto 0.4em auto",flex:"1",color:"#002e82",fontSize:"4em",fontWeight:"bold"},y={fontSize:"1.4em",marginTop:"-2em",color:"white",height:"2em",zIndex:"10"},g=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={status:"ready",dtstart:null,dtfinish:null,time:0},n.Start=n.Start.bind(Object(u.a)(n)),n.Finish=n.Finish.bind(Object(u.a)(n)),n.Continue=n.Continue.bind(Object(u.a)(n)),n.Dnf=n.Dnf.bind(Object(u.a)(n)),n.ftimer=null,n.Timer=n.Timer.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"Start",value:function(){var e=this;this.setState({status:"started",dtstart:new Date},(function(){e.props.setOnRace()})),this.ftimer=setInterval(this.Timer,1e3)}},{key:"Finish",value:function(){var e=this,t=new Date;clearInterval(this.ftimer),this.setState({status:"finished",dtfinish:t,time:t-this.state.dtstart},(function(){e.props.setOnRace()})),window.confirm("\u0424\u0438\u043d\u0438\u0448 #"+this.props.number+"?")||this.Continue()}},{key:"FinishExt",value:function(e){var t=this;clearInterval(this.ftimer),this.setState({status:"finished",dtfinish:e,time:e-this.state.dtstart},(function(){t.props.setOnRace()}))}},{key:"Continue",value:function(){var e=this;this.setState({status:"started",dtfinish:null,time:0},(function(){e.props.setOnRace()})),this.ftimer=setInterval(this.Timer,1e3)}},{key:"Dnf",value:function(){window.confirm("DNF?")&&this.setState({status:"dnf",time:999999,dtfinish:null})}},{key:"Timer",value:function(){var e=this.state.dtstart;this.setState({time:new Date-e})}},{key:"TFormat",value:function(e){var t=parseInt(e,10),a=Math.floor(t/1e3),n=Math.floor(a/3600),i=Math.floor((a-3600*n)/60),r=a-3600*n-60*i;return i<10&&(i="0"+i),r<10&&(r="0"+r),n+":"+i+":"+r}},{key:"TmilliFormat",value:function(e){var t=parseInt(e,10)%1e3;return t<10?t="00"+t:t<100&&(t="0"+t),t}},{key:"render",value:function(){var e,t;if("ready"===this.state.status)e=i.a.createElement("div",{style:d,onClick:this.Start},i.a.createElement("div",{style:E},this.props.number));else if("started"===this.state.status)t=this.TFormat(this.state.time),e=i.a.createElement("div",{style:v,onClick:this.Finish},i.a.createElement("div",{style:E},this.props.number),i.a.createElement("div",{style:y},t));else if("finished"===this.state.status){t=this.TFormat(this.state.time);var a=this.TmilliFormat(this.state.time);e=i.a.createElement("div",{style:p,onClick:this.Dnf},i.a.createElement("div",{style:E},this.props.number),i.a.createElement("div",{style:y},t,i.a.createElement("br",null),i.a.createElement("sup",null,",",a)))}else"dnf"===this.state.status&&(e=i.a.createElement("div",{style:b},i.a.createElement("div",{style:E},this.props.number),i.a.createElement("div",{style:y},"DNF")));return i.a.createElement("div",{key:this.props.number,style:f},e)}}]),a}(i.a.Component),k={height:"2em",display:"flex",flexDirection:"row",margin:"0.2em",textAlign:"left"},O={backgroundColor:"#ff7070",width:"100%",padding:"0.1em"},F={backgroundColor:"#a0a0a0",width:"100%",padding:"0.1em"},S={padding:"0.2em auto 0.4em auto",flex:"1",color:"#002e82",fontSize:"1.6em",width:"1.4em",fontWeight:"bold",float:"left",textAlign:"right"},T={fontSize:"1.4em",color:"white",height:"2em",marginLeft:"1em"},j=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"TFormat",value:function(e){var t=parseInt(e,10),a=Math.floor(t/1e3),n=Math.floor(a/3600),i=Math.floor((a-3600*n)/60),r=a-3600*n-60*i;return i<10&&(i="0"+i),r<10&&(r="0"+r),n+":"+i+":"+r}},{key:"TmilliFormat",value:function(e){var t=parseInt(e,10)%1e3;return t<10?t="00"+t:t<100&&(t="0"+t),t}},{key:"render",value:function(){var e;if("finished"===this.props.status){var t=this.TFormat(this.props.time),a=this.TmilliFormat(this.props.time);e=i.a.createElement("div",{style:O},i.a.createElement("div",{style:S},this.props.number),i.a.createElement("span",{style:T},t,i.a.createElement("small",null,",",a)))}else"dnf"===this.props.status&&(e=i.a.createElement("div",{style:F},i.a.createElement("div",{style:S},this.props.number),i.a.createElement("span",{style:T},"DNF")));return i.a.createElement("div",{key:this.props.number,style:k},e)}}]),a}(i.a.Component),w={fontSize:"0.6em"},C=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={onrace:[],finishers:{},finished:0,truefinished:0},n.Finish=n.Finish.bind(Object(u.a)(n)),n.SelectToFinish=n.SelectToFinish.bind(Object(u.a)(n)),n.TheEnd=n.TheEnd.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"setOnRace",value:function(e){this.setState({onrace:e})}},{key:"Finish",value:function(){var e=this.state.finishers;if(!(Object.values(e).length>=this.state.onrace.length)){var t=this.state.finished+1,a=this.state.truefinished+1;e[t]={fin:t,dtfinish:new Date,ord:a},this.setState({finishers:e,finished:t,truefinished:a})}}},{key:"SelectToFinish",value:function(e){var t=e.target.value;if("-1"!==t){var a,n=t,i=t.split(":"),r=this.state.finishers,s=this.state.truefinished;if(i[1])n=i[0],a=i[1],this.props.finishStarter(a,this.state.finishers[n].dtfinish);else for(var l in s--,r)l>n&&r[l].ord--;delete r[n],this.setState({finishers:r,truefinished:s})}}},{key:"TheEnd",value:function(){window.confirm("\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0433\u043e\u043d\u043a\u0443?")&&this.props.TheEnd()}},{key:"FormatTime",value:function(e){var t=e.getHours(),a=e.getMinutes(),n=e.getSeconds();return t<10&&(t="0"+t),a<10&&(a="0"+a),n<10&&(n="0"+n),t+":"+a+":"+n}},{key:"FinisherSelector",value:function(e){var t=this.state.onrace.map((function(t){var a=e.fin+":"+t;return i.a.createElement("option",{key:t,value:a},t)})),a=this.FormatTime(e.dtfinish);return i.a.createElement("select",{key:e.fin,name:"onRace",id:"on-race-num",defaultValue:"-1",onChange:this.SelectToFinish},i.a.createElement("option",{value:"-1",disabled:!0},"\u0424\u0438\u043d\u0438\u0448 \u0432 ",a,"?"),i.a.createElement("option",{value:e.fin},"\u041e\u0442\u043c\u0435\u043d\u0430"),t)}},{key:"Finishers",value:function(){var e=this;return Object.values(this.state.finishers).map((function(t,a){var n=e.FinisherSelector(t);return i.a.createElement("div",{key:t.fin},n)}))}},{key:"render",value:function(){var e,t="";return this.state.onrace.length>0?(t=this.Finishers(),e=i.a.createElement("button",{onClick:this.Finish,className:"finishbtn"},"\u0424\u0438\u043d\u0438\u0448!",i.a.createElement("div",{style:w},"\u043d\u0435 \u0432\u0438\u0434\u043d\u043e \u043d\u043e\u043c\u0435\u0440"))):e=i.a.createElement("button",{onClick:this.TheEnd,className:"finishbtn"},"\u041a\u043e\u043d\u0435\u0446",i.a.createElement("div",{style:w},"\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0433\u043e\u043d\u043a\u0443")),i.a.createElement("div",{className:"statusbar"},t,e)}}]),a}(i.a.Component),N=a(8),I=a.n(N),x=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).finishStarter=function(e,t){n.state.starters[e-1].current.FinishExt(t)},n.setOnRace=function(){for(var e=[],t=1;t<=n.state.num;t++){"started"===n.state.starters[t-1].current.state.status&&e.push(t)}n.statusbar.current.setOnRace(e)},n.TheEnd=function(){for(var e=[],t=1;t<=n.state.num;t++){var a=n.state.starters[t-1].current.state;a.number=n.state.starters[t-1].current.props.number,a.time>0&&e.push(a)}e.sort((function(e,t){return e.time>t.time?1:e.time<t.time?-1:0})),n.setState({protocol:e})},n.state={num:10,starters:[],protocol:[]},n.statusbar=i.a.createRef(),n.Numchange=n.Numchange.bind(Object(u.a)(n)),n.Init=n.Init.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"Numchange",value:function(e){this.setState({num:e.target.value})}},{key:"Init",value:function(){for(var e=[],t=1;t<=this.state.num;t++)e.push(i.a.createRef());this.setState({starters:e})}},{key:"Starters",value:function(){var e=this;return this.state.starters.map((function(t,a){return i.a.createElement(g,{key:a+1,number:a+1,ref:t,setOnRace:e.setOnRace})}))}},{key:"Finishers",value:function(){return this.state.protocol.map((function(e,t){return i.a.createElement(j,{key:t+1,number:e.number,status:e.status,time:e.time})}))}},{key:"render",value:function(){var e;if(this.state.protocol.length>0){var t=this.Finishers();e=i.a.createElement("div",{className:"race-screen"},i.a.createElement("h2",null,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),t)}else if(this.state.starters.length>0){var a=this.Starters();e=i.a.createElement("div",{className:"race-screen"},a,i.a.createElement("div",{className:"lastblock"}),i.a.createElement(C,{finishStarter:this.finishStarter,TheEnd:this.TheEnd,ref:this.statusbar}))}else e=i.a.createElement("div",{className:"start-screen"},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"num_starters"},"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432:")),i.a.createElement("div",null,i.a.createElement("input",{type:"number",id:"num_starters",value:this.state.num,onChange:this.Numchange,size:"3"})),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.Init},"\u041d\u0430 \u0441\u0442\u0430\u0440\u0442!")),i.a.createElement("img",{src:I.a,className:"App-logo",alt:"logo"}));return i.a.createElement("div",{className:"mainblock"},e)}}]),a}(i.a.Component);var D=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(l,null,i.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.6caa0d45.chunk.js.map